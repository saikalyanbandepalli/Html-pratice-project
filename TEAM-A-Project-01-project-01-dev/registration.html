<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User Registration - Task Management App</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
        input[type="text"], input[type="password"], input[type="email"], select {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        #message, #emailMessage {
            display: none;
            margin-top: 10px;
        }

        .invalid {
            color: red;
        }

        .valid {
            color: green;
        }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>User Registration</h1>
      <form id="registerForm">
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" required />

        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required />
        <div id="message">
          <p id="length" class="invalid">Minimum <b>8 characters</b></p>
          <p id="uppercase" class="invalid">An <b>uppercase</b> letter</p>
          <p id="lowercase" class="invalid">A <b>lowercase</b> letter</p>
          <p id="number" class="invalid">A <b>number</b></p>
          <p id="special" class="invalid">A <b>special character</b></p>
        </div>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required />
        <div id="emailMessage">
          <p id="emailFormat" class="invalid">
            Must be a valid <b>email address</b>
          </p>
        </div>

        <label for="firstName">First Name:</label>
        <input type="text" id="firstName" name="firstName" required />

        <label for="lastName">Last Name:</label>
        <input type="text" id="lastName" name="lastName" required />

        <label for="role">Role:</label>
        <select id="role" name="role" required>
          <option value="admin">Admin</option>
          <option value="manager">Project Manager</option>
          <option value="member">Team Member</option>
        </select>

        <button type="submit">Register</button>

        <br /><br />
        <div>
          <span>If already Registered: </span>
          <a href="./login.html">login_here</a>
        </div>
      </form>
    </div>

    <script src="./register.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const passwordInput = document.getElementById("password");
        const emailInput = document.getElementById("email");
        const length = document.getElementById("length");
        const uppercase = document.getElementById("uppercase");
        const lowercase = document.getElementById("lowercase");
        const number = document.getElementById("number");
        const special = document.getElementById("special");
        const emailFormat = document.getElementById("emailFormat");

        // Password validation
        passwordInput.onfocus = function () {
          document.getElementById("message").style.display = "block";
        };

        passwordInput.onblur = function () {
          document.getElementById("message").style.display = "none";
        };

        passwordInput.onkeyup = function () {
          const value = passwordInput.value;

          // Validate length
          if (value.length >= 8) {
            length.classList.remove("invalid");
            length.classList.add("valid");
          } else {
            length.classList.remove("valid");
            length.classList.add("invalid");
          }

          // Validate uppercase letters
          if (/[A-Z]/.test(value)) {
            uppercase.classList.remove("invalid");
            uppercase.classList.add("valid");
          } else {
            uppercase.classList.remove("valid");
            uppercase.classList.add("invalid");
          }

          // Validate lowercase letters
          if (/[a-z]/.test(value)) {
            lowercase.classList.remove("invalid");
            lowercase.classList.add("valid");
          } else {
            lowercase.classList.remove("valid");
            lowercase.classList.add("invalid");
          }

          // Validate numbers
          if (/\d/.test(value)) {
            number.classList.remove("invalid");
            number.classList.add("valid");
          } else {
            number.classList.remove("valid");
            number.classList.add("invalid");
          }

          // Validate special characters
          if (/[\W_]/.test(value)) {
            special.classList.remove("invalid");
            special.classList.add("valid");
          } else {
            special.classList.remove("valid");
            special.classList.add("invalid");
          }
        };

        // Email validation
        emailInput.onfocus = function () {
          document.getElementById("emailMessage").style.display = "block";
        };

        emailInput.onblur = function () {
          document.getElementById("emailMessage").style.display = "none";
        };

        emailInput.onkeyup = function () {
          const value = emailInput.value;
          const emailPattern =
            /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;

          if (emailPattern.test(value)) {
            emailFormat.classList.remove("invalid");
            emailFormat.classList.add("valid");
          } else {
            emailFormat.classList.remove("valid");
            emailFormat.classList.add("invalid");
          }
        };
      });

      document
        .getElementById("registrationForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          const username = document.getElementById("username").value;
          const password = document.getElementById("password").value;
          const email = document.getElementById("email").value;
          const firstName = document.getElementById("firstName").value;
          const lastName = document.getElementById("lastName").value;
          const userRole = document.getElementById("userRole").value;

          const emailPattern =
            /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;

          if (!emailPattern.test(email)) {
            alert("Please enter a valid email address.");
            return;
          }
        });
    </script>
  </body>
</html>
